/* map/stylesmap.css — chỉ style cho phần bản đồ, tách khỏi styles.css */

/* Pane phải (map) & host */
#pane-map, #mapHost{ min-height:0; }
.map-host{
  flex:1; min-height:0; padding:0;
  border:0; background:transparent;   /* bỏ nền xám & viền */
  display:flex; align-items:center; justify-content:center; overflow:hidden;
}

/* Ẩn placeholder khi map đã khởi tạo */
.map-host.has-map .map-placeholder{ display:none; }

/* Leaflet fill 100% container */
.leaflet-container{
  width:100% !important;
  height:100% !important;
}

/* Nút điều khiển map (tạo ở map.js) */
.map-ctrl{
  display:inline-flex; gap:6px; align-items:center;
  background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:6px;
  box-shadow:0 2px 8px rgba(0,0,0,.08);
  font:500 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.map-ctrl button{
  cursor:pointer; border:1px solid #e5e7eb; border-radius:6px;
  background:#f8fafc; padding:4px 8px;
}
.map-ctrl label{ display:flex; align-items:center; gap:4px; cursor:pointer; }

/* Legend (nếu dùng) */
.legend{
  background:#fff; padding:6px 8px; border-radius:6px;
  box-shadow:0 0 5px rgba(0,0,0,.2);
  font-size:12px; line-height:1.5;
}

/* Ưu tiên lớp marker/label trên cùng */
.leaflet-pane .leaflet-marker-pane{ z-index:420; }
.leaflet-pane .leaflet-popup-pane{ z-index:430; }

/* ===== Zone UI (status bar + list) ===== */
#pane-map { display: flex; flex-direction: column; min-height: 0; }
#mapHost   { flex: 1 1 auto; min-height: 320px; }

.zone-status-bar{
  position: sticky; top: 0; z-index: 2;
  margin: 8px; padding: 6px 10px;
  background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 8px;
  font-size: 13px; line-height: 1.35; color: #0f172a;
}

.zone-list{
  margin: 8px; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;
  background: #fff;
}
.zone-list-header{
  display: grid; grid-template-columns: 1fr 80px 100px 80px;
  padding: 6px 8px; gap: 0;
  background: #f1f5f9; border-bottom: 1px solid #e5e7eb;
  font-weight: 600; font-size: 12px; color: #0f172a;
}
.zone-row{
  display: grid; grid-template-columns: 1fr 80px 100px 80px; gap: 0;
  align-items: center; width: 100%;
  padding: 8px; border: 0; border-bottom: 1px solid #f1f5f9;
  background: #fff; text-align: left; cursor: pointer; font-size: 13px;
}
.zone-row:hover{ background: #f8fafc; }
.zone-row .name{ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.zone-row .badge{
  display: inline-block; min-width: 28px; padding: 2px 6px; text-align: center;
  border-radius: 12px; font-variant-numeric: tabular-nums;
}
.zone-row .in.badge{   background: #e6f4ea; color: #14532d; }
.zone-row .stop.badge{ background: #fff3cd; color: #7a5b00; }
.zone-row .out.badge{  background: #f8d7da; color: #7f1d1d; }
.zone-empty{ padding: 10px; color: #64748b; font-size: 13px; }

/* ===== Right-click menu & POI modal ===== */
.map-ctx{
  position: fixed; z-index: 9999; width: 280px;
  background:#fff; border:1px solid #e5e7eb; border-radius:10px;
  box-shadow: 0 8px 24px rgba(0,0,0,.12); padding:6px;
}
.map-ctx.hidden{ display:none; }
.map-ctx > button{
  display:block; width:100%; text-align:left; background:#fff; border:0;
  padding:10px 12px; border-radius:8px; cursor:pointer; font-size:14px;
}
.map-ctx > button:hover{ background:#f8fafc; }
.map-ctx > hr{ border:0; height:1px; background:#f1f5f9; margin:6px 0; }

.poi-modal{ position:fixed; inset:0; background:rgba(15,23,42,.35); display:flex; align-items:center; justify-content:center; z-index:9999; }
.poi-modal.hidden{ display:none; }
.poi-dialog{ width:520px; max-width:92vw; background:#fff; border-radius:12px; border:1px solid #e5e7eb; box-shadow:0 12px 30px rgba(0,0,0,.18); }
.poi-title{ font-weight:700; padding:12px 16px; border-bottom:1px solid #e5e7eb; }
.poi-form{ display:grid; grid-template-columns: 1fr 1fr; gap:10px 14px; padding:12px 16px; }
.poi-form label{ display:flex; flex-direction:column; font-size:12px; color:#475569; gap:6px; }
.poi-form input[type="text"], .poi-form input[type="number"], .poi-form input[placeholder], .poi-form input:not([type]){
  border:1px solid #e5e7eb; border-radius:8px; padding:8px 10px; font-size:14px;
}
.poi-actions{ display:flex; justify-content:flex-end; gap:10px; padding:12px 16px; border-top:1px solid #e5e7eb; }
.poi-actions button{ padding:8px 12px; border-radius:8px; border:1px solid #e5e7eb; background:#0ea5e9; color:#fff; cursor:pointer; }
.poi-actions button.ghost{ background:#fff; color:#0f172a; }
.poi-actions button:hover{ filter:brightness(.96); }

/* === Context menu & modal cho MAP === */
.map-ctx{ position:fixed; z-index:5000; width:300px; background:#fff; border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.2); overflow:hidden; }
.map-ctx.hidden{ display:none; }
.map-ctx>hr{ margin:6px 0; border:0; border-top:1px solid #e2e8f0; }
.map-ctx button{ display:block; width:100%; padding:10px 12px; border:0; background:#fff; font-size:13px; text-align:left; cursor:pointer; }
.map-ctx button:hover{ background:#f1f5f9; }
.map-ctx [data-disabled]{ pointer-events:none; opacity:.5; }

/* Modal không chặn chuột bản đồ: container tắt pointer-events, chỉ dialog bật */
.poi-modal{ position:fixed; inset:16px; display:flex; align-items:flex-start; justify-content:flex-end;
  background:transparent; z-index:4999; pointer-events:none; }
.poi-modal.hidden{ display:none; }
.poi-modal .poi-dialog{ pointer-events:auto; width:340px; background:#fff; border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.2); padding:12px; }
.poi-title{ font-weight:600; margin-bottom:8px; }
.poi-form{ display:grid; grid-template-columns:1fr 1fr; gap:8px 12px; }
.poi-form label{ display:flex; flex-direction:column; font-size:12px; color:#334155; }
.poi-form input, .poi-form select{ margin-top:4px; padding:6px 8px; border:1px solid #e2e8f0; border-radius:8px; font-size:13px; }
.poi-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:10px; }
.poi-actions button{ padding:8px 12px; border-radius:10px; border:0; background:#2563eb; color:#fff; cursor:pointer; }
.poi-actions button.ghost{ background:#e2e8f0; color:#111827; }

/* ===== Bảng danh sách xe ===== */
.veh-table-panel{
  position: fixed;
  right: 12px; top: 86px; bottom: 12px; width: 480px;
  background:#fff; border:1px solid #e5e7eb; border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.15); z-index:4000; display:flex; flex-direction:column;
}
.veh-table-panel.hidden{ display:none; }
.veh-panel-header{ position:sticky; top:0; background:#fff; z-index:1;
  display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px 10px; border-bottom:1px solid #e5e7eb; }
.veh-panel-header .tools{ display:flex; align-items:center; gap:8px; }
.veh-panel-header input{ padding:6px 8px; border:1px solid #e5e7eb; border-radius:8px; width:220px; font-size:13px; }
.veh-panel-header button{ padding:6px 10px; border:1px solid #e5e7eb; background:#f8fafc; border-radius:8px; cursor:pointer; }
.veh-rows{ overflow:auto; height:100%; }
.veh-table{ width:100%; border-collapse:separate; border-spacing:0; font-size:12px; }
.veh-table thead th{ position:sticky; top:0; background:#f8fafc; border-bottom:1px solid #e5e7eb; text-align:left; padding:8px; }
.veh-table tbody td{ border-bottom:1px solid #f1f5f9; padding:6px 8px; vertical-align:top; }
.veh-table tbody tr:hover{ background:#f8fafc; cursor:pointer; }
.veh-table td.status{ white-space:nowrap; }
.veh-table td.status i{ display:inline-block; width:10px; height:10px; border-radius:50%; margin-right:6px; vertical-align:middle; }
.veh-table td.addr{ max-width:260px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.veh-table td.empty{ text-align:center; color:#64748b; padding:16px; }
/* === Zone Drawer (ẩn/hiện bằng tay nắm) === */
#pane-map { position: relative; }
.zone-drawer{
  position: absolute; right: 12px; left: 12px; bottom: 12px;
  display: flex; justify-content: flex-end; z-index: 1200; pointer-events: none;
}
.zone-drawer .drawer{ pointer-events: auto; display: flex; align-items: stretch; gap: 8px; }
.zone-handle{
  width: 28px; min-width: 28px; height: 120px;
  display:flex; align-items:center; justify-content:center;
  background:#fff; border:1px solid #e5e7eb; border-radius:8px;
  box-shadow:0 4px 16px rgba(0,0,0,.12);
  user-select:none;
}
.zone-handle .chev{ font-size:18px; color:#334155; line-height:1; }
.zone-panel{
  width: var(--zone-drawer-w, 480px);
  max-width: 80vw;
  background:#fff; border:1px solid #e5e7eb; border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.15); overflow:hidden; display:none;
}
.zone-drawer.open .zone-panel{ display:block; }
.zone-drawer.collapsed .zone-handle{ cursor: pointer; }
.zone-drawer.open .zone-handle{ cursor: ew-resize; }

/* (tận dụng class zone-list/row/badge đang có; nếu thiếu, thêm nhẹ) */
.zone-list{ max-height: 240px; overflow:auto; }
.zone-list-header{ display:grid; grid-template-columns:1fr 70px 90px 80px; gap:8px; padding:8px 10px; background:#f8fafc; border-bottom:1px solid #e5e7eb; font-weight:600; }
.zone-row{ display:grid; grid-template-columns:1fr 70px 90px 80px; gap:8px; padding:8px 10px; border-bottom:1px solid #f1f5f9; background:#fff; text-align:left; }
.zone-row:hover{ background:#f8fafc; }
.zone-row .badge{ display:inline-flex; align-items:center; justify-content:center; min-width:30px; padding:2px 8px; border-radius:999px; font-weight:600; background:#f1f5f9; }
.zone-row.all .name{ font-weight:700; }




